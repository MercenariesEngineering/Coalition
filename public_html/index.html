<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Coalition Server</title>
    <link href="css/coalition.css" rel="stylesheet" type="text/css"></link>
    <link href="css/slick-default-theme.css" rel="stylesheet" type="text/css"></link>
    <link href="css/slick.grid.css" rel="stylesheet" type="text/css"></link>
    <link href="css/jquery-ui.1.11.4.Eggplant.css" rel="stylesheet" type="text/css"></link>
    <link href="css/jquery.timepicker.css" rel="stylesheet" type="text/css"></link>
    <link href="js/controls/slick.columnpicker.css" rel="stylesheet" type="text/css"></link>
    <link href="js/controls/slick.pager.css" rel="stylesheet" type="text/css"></link>
    <script src="js/firebugx.js"></script>
    <script src="js/jquery-1.7.min.js"></script>
    <script src="js/jquery-ui-1.8.16.custom.min.js"></script>
    <script src="js/jquery.event.drag-2.3.0.js"></script>
    <script src="js/jquery.timepicker.min.js"></script>
    <script src="js/slick.core.js"></script>
    <script src="js/slick.grid.js"></script>
    <script src="js/slick.dataview.js"></script>
    <script src="js/slick.formatters.js"></script>
    <script src="js/slick.editors.js"></script>
    <script src="js/slick.groupitemmetadataprovider.js"></script>
    <script src="js/plugins/slick.rowselectionmodel.js"></script>
    <script src="js/controls/slick.columnpicker.js"></script>
    <script src="js/controls/slick.pager.js"></script>
    <script src="js/coalition.js"></script>
  </head>
  <body class="flex-column">
    <div id="header">
      <div id="top" class="flex-row">
        <div id="maintitle"><a href="https://github.com/MercenariesEngineering/coalition">Coalition</a></div>

        <div id="tools">

          <div id="jobstools" class="flex-column">
            <div id="actions" class="flex-row">
              <div class='button' id='b03' onclick='resetSelection()'><img src='img/icon_refresh.png' /> Reset</div>
              <div class='button' id='b04' onclick='resetErrorSelection()'><img src='img/icon_refresh.png' /> Reset Errors</div>
              <div class='button' id='b05' onclick='startSelection()'><img src='img/icon_play.png' /> Start</div>
              <div class='button' id='b06' onclick='pauseSelection()'><img src='img/icon_pause.png' /> Pause</div>
              <div class='button' id='b07' onclick='cutSelection()'><img src='img/icon_cut.png' /> Cut</div>
              <div class='button' id='b11' onclick='pasteSelection()'><img src='img/icon_paste.png' /> Paste</div>
              <div class='button' id='b03' onclick='removeSelection()'><img src='img/icon_remove.png' /> Delete</div>
              <div class='button' id='b08' onclick='logSelection()'><img src='img/icon_logs.png' /> Log</div>
              <div class='button' id='b09' onclick='jobActivity()'><img src='img/icon_activity.png' /> Activity</div>
              <div class='button' id='b10' onclick='exportCSV()'><img src='img/icon_tabler.png' /> CSV</div>
              <form id="sql-jobs"></form>
              <button type="button" form="sql-jobs" onclick="getSqlWhereJobs(this.form);">Filter jobs</button>
              <button type="button" onclick="resetSqlFilter();">Reset filter</button>
            </div>
            <div class="flex-row">
              <div id= "selections">
                <div class='button' id='Div1'>Filter
                  <select id='filterJobs' onchange='javascript:sendreloadJobs (this.id)'>
                    <option value='NONE'>NONE</option>
                    <option value='WORKING'>WORKING</option>
                    <option value='ERROR'>ERROR</option>
                    <option value='WAITING'>WAITING</option>
                    <option value='FINISHED'>FINISHED</option>
                    <option value='PAUSED'>PAUSED</option>
                  </select>
                </div>
                <div class='button' id='Div2'>Affinity
                  <input type='edit' id='filterJobsAffinity' onchange='javascript:sendreloadJobs (this.id)'/>
                </div>
                <div class='button' id='Div3'>Title
                  <input type='edit' id='filterJobsTitle' onchange='javascript:sendreloadJobs (this.id)'/>
                </div>
                <div class='button' id='b01'>Select
                  <select id='selectJobs' onchange='javascript:selectJobs ()' value='CUSTOM'>
                    <option value='NONE'>NONE</option>
                    <option value='ALL'>ALL</option>
                    <option value='WORKING'>WORKING</option>
                    <option value='ERROR'>ERROR</option>
                    <option value='WAITING'>WAITING</option>
                    <option value='FINISHED'>FINISHED</option>
                    <option value='PAUSED'>PAUSED</option>
                    <option value='CUSTOM'>CUSTOM</option>
                  </select>
                </div>
                <div class='button' id='b13'>SQL WHERE:
                  <input type='edit' id='getsqlwhereJobs' onchange='javascript:getsqlwhereJobs(this.id)'/>
                </div>
              </div>
            </div>
            <div id="parents" class="flex-row"></div>
            <div id="toolstable" class="flex-row">
              <div class="flex-column flex-grow">
                <div>Title:<input type='edit' class="ttedit" id='title' name='title' value='Job' onchange='onchangejobprop ("title")'></div>
                <div>Command:<input type='edit' class="ttedit" id='cmd' name='cmd' value='' onchange='onchangejobprop ("cmd")'></div>
                <div>Dir:<input type='edit' class="ttedit" id='dir' name='dir' value='.' onchange='onchangejobprop ("dir")'></div>
                <div>Dependencies:<input type='edit' class="ttedit" id='dependencies' name='dependencies' value='' onchange='onchangejobprop ("dependencies")'></div>
                <div>Url:<input type='edit' class="ttedit" id='url' name='url' value='' onchange='onchangejobprop ("url")'></div>
                <div>Environment:<input type='edit' class="ttedit" id='env' name='env' value='' onchange='onchangejobprop ("env")'></div>
                <div>Priority:<input type='edit' class="ttedit" id='priority' name='priority' value='127' onchange='onchangejobprop ("priority")'></div>
                <div>Timeout:<input type='edit' class="ttedit" id='timeout' name='timeout' value='0' onchange='onchangejobprop ("timeout")'></div>
                <div>Affinity:<input type='edit' class="ttedit" id='affinity' name='affinity' value='' onchange='onchangejobprop ("affinity")'></div>
                <div>User:<input type='edit' class="ttedit" id='user' name='user' value='' onchange='onchangejobprop ("user")'></div>
              </div>
              <div class="flex-column">
                <input type='button' class='toolbutton' name='updatejobsButton' value='Update' onclick='updatejobs()' />
                <input type='button' class='toolbutton' name='addjobButton' value='Add job' onclick='addjob()' />
              </div>
            </div>
          </div>

          <div id="workertools">
            <div class='button' id='b06' onclick='selectAll (true)'><img src='img/icon_select.png' /> Select All</div>
            <div class='buttonSep'>|</div>
            <div class='button' id='b07' onclick='selectAll (false)'><img src='img/icon_none.png' /> Select None</div>
            <div class='buttonSep'>|</div>
            <div class='button' id='b09' onclick='startWorkers ()'><img src='img/icon_play.png' /> Start</div>
            <div class='buttonSep'>|</div>
            <div class='button' id='b10' onclick='stopWorkers ()'><img src='img/icon_pause.png' /> Stop</div>
            <div class='buttonSep'>|</div>
            <div class='button' id='b08' onclick='clearWorkers ()'><img src='img/icon_remove.png' /> Delete</div>
            <div class='buttonSep'>|</div>
            <div class='button' id='b11' onclick='workerActivity ()'><img src='img/icon_activity.png' /> Activity</div>
          </div>
        </div>

        <div class="refreshtools">
          <input id="refreshbutton" class="refreshbutton" type="button" onclick='refresh()' value='Refresh'/>
          <label><input id="autorefresh" class="auto" type="checkbox">Auto refresh</label>
          <button type="button" id="toggle-toolbar" onclick="showHideTools();">Toggle toolbar</button>
        </div>
      </div>
      <div id="tabs" class="flex-row">
        <div id="jobtab" class="activetab" onclick='showPage("jobs")'>Jobs</div>
        <div id="workertab" class="unactivetab" onclick='showPage("workers")'>Workers</div>
        <div id="activitytab" class="unactivetab" onclick='showPage("activities")'>Activities</div>
        <div id="logtab" class="unactivetab" onclick='showPage("logs")'>Log</div>
        <div id="affinitytab" class="unactivetab" onclick='showPage("affinities")'>Affinities</div>
      </div>
    </div>
    <div id="main">
      <div id="jobsTab" class="flex-column">
        <div id="pagination" class="flex-row"></div>
        <div id="main_content" class="flex-row">
          <div id="jobs"></div>
        </div>
      </div>
      <div id="workersTab">
        <div id="workers">
        </div>

        <table id="workertoolstable">
          <tr>
            <td class="ttr3">affinity:</td><td><textarea type='edit' class="ttedit" id='waffinity' name='waffinity' value='' onchange='onchangeworkerprop ("waffinity")'></textarea></td>
            <td rowspan=4>
              <div>
                <input type='button' class='toolbutton' name='updatejobsButton' value='Update' onclick='updateworkers()' />
              </div>
            </td>
          </tr>
        </table>
      </div>
      <div id="logsTab">
        <div id="logtools">
          <div class='button' id='b12' onclick='clearLog()'><img src='img/icon_remove.png' /> Clear</div>
        </div>
        <div id="logs">
        </div>
      </div>
      <div id="activitiesTab">
        <div id="activitiestools">
          <div class='button' id='Div2'>Job filter
            <input id='activityJob' onchange='javascript:reloadActivities()'>
            </input>
          </div>
          <div class='buttonSep'>|</div>
          <div class='button' id='Div3'>Worker filter
            <input id='activityWorker' onchange='javascript:reloadActivities()'>
            </input></div>
            <div class='buttonSep'>|</div>
            <div class='button' id='Div4'>How long
              <select id='howlong' onchange='javascript:reloadActivities()'>
                <option value='60'>Last minute</option>
                <option value='600'>Last 10 minutes</option>
                <option value='3600'>Last hour</option>
                <option value='28800'>Last 8 hours</option>
                <option value='86400'>Last day</option>
                <option value='604800'>Last week</option>
                <option value='2592000'>Last month</option>
                <option value='15552000'>Last 6 monthes</option>
                <option value='100000000000'>All</option>
              </select>
            </div>
        </div>
        <div id="activities">
        </div>
      </div>
      <div id="affinitiesTab">
        <div id="affinities">
        </div>
        <table id="affinitytoolstable">
          <tr>
            <td rowspan=4>
              <div>
                <input type='button' class='toolbutton' name='updateaffinitiesButton' value='Update' onclick='sendAffinities()' />
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <div footer>
      <div id="subtitle">A small but beautiful job manager by <a href="http://www.mercenaries-engineering.com">Mercenaries Engineering</a> - GPL licence - <a href="mobile.html">mobile version</a></div>
    </div>
  </body>
</html>

